image:https://github.com/ncomet/koson/blob/master/image/koson-logo.png["Koson Logo", link="https://github.com/ncomet/koson"]

= Koson

image:https://travis-ci.org/ncomet/koson.svg?branch=master["Build Status", link="https://travis-ci.org/ncomet/koson"]

Concise Kotlin DSL for building JSON objects and their String representations

== DSL

[source, Kotlin]
----
// for an empty object
obj { }

// for an object
obj {
  "attribute" to 42
  "another" to true
}

// for an empty array
arrayØ

// for an array
array ["element", 12.345, null]
----

NOTE: Any combination of these instructions is possible

== How to use

[source, Kotlin]
----
val obj = obj {
  "key" to 3.4
  "anotherKey" to array ["test", "test2", 1, 2.433, true]
  "nullValue" to null
  "emptyObject" to obj { }
  "emptyArray" to arrayØ
}

println(obj) // see below
----

.println(obj)
[source, json]
----
{"key":3.4,"anotherKey":["test","test2",1,2.433,true],"nullValue":null,"emptyObject":{},"emptyArray":[]}
----

[source, Kotlin]
----
val array = array [
  "koson",
  obj {
    "key" to 3.4
     "anotherKey" to array ["first", "second", 1, 2.433, true]
  }
]

println(array) // see below
----

.println(array)
[source, json]
----
["koson",{"key":3.4,"anotherKey":["first","second",1,2.433,true]}]
----

== Strong type constraints

A `Kotlin` `IllegalArgumentException` is raised on these conditions :

* A JSON key (attribute) duplicate is found
* A JSON key (attribute) is not of `Kotlin` type `String`
* A JSON value is not one of the following `Kotlin` types :
** String
** Number
** Boolean
** null
** obj
** array
** arrayØ (empty array)

== Runtime prerequisites

* `Kotlin`
* `Java` 8 or later

== Build prerequisites

* `Java` 8 or later

[source]
----
./mvnw package
----

